{"version":3,"sources":["components/Navigation.jsx","components/Field.jsx","components/Button.jsx","components/ManipulatuionPanel.jsx","utils/index.js","App.js","reportWebVitals.js","index.js"],"names":["Navigation","length","difficulty","onChangeDifficulty","upVisibility","downVisibility","className","onClick","Field","fields","map","row","column","Button","status","onStart","onRestart","onStop","ManipulationPanel","onChange","icon","faArrowLeft","faArrowUp","faArrowDown","faArrowRight","getFoodPosition","fieldSize","excludes","x","Math","floor","random","y","some","item","initFields","snake","i","cols","Array","fill","push","food","initialPosition","initialValue","Difficulty","GameStatus","Object","freeze","init","playing","suspended","gameover","Direction","up","right","left","down","DirectionKeyCodeMap","37","38","39","40","Delta","OppsiteDirection","timer","undefined","unsbscribe","clearInterval","App","useState","setFields","body","setBody","setStatus","tick","setTick","direction","setDirection","setDifficulty","onChangeaDirection","useCallback","newDirection","useEffect","handleKeyDown","e","keyCode","document","addEventListener","removeEventListener","setInterval","handleMoving","position","delta","newPosition","isEatingMyself","newBody","removingTrack","pop","unshift","style","padding","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.28556a92.chunk.js","sourcesContent":["import React from \"react\";\n\n  const Navigation = ({ length, difficulty=3,onChangeDifficulty }) => {\n    const upVisibility=difficulty<5 ? \"\" : 'is-hidden'\n    const downVisibility=difficulty>1 ? \"\" :'is-hidden'\n    const onUpDifficulty=()=> onChangeDifficulty(difficulty+1)\n    const onDownDifficulty=()=>onChangeDifficulty(difficulty-1)\n    return (\n      <div className=\"navigation\">\n        <div className=\"navigation-item\">\n            <span className=\"navigation-label\">Length: </span>\n            <div className=\"navigation-item-number-container\">\n              <div className=\"num-board\">{length}</div>\n            </div>\n        </div>\n        <div className=\"navigation-item\">\n          <span className=\"navigation-label\">Difficulty: </span>\n          <div className=\"navigation-item-number-container\">\n            <span className=\"num-board\">{difficulty}</span>\n            <div className=\"difficulty-button-container\">\n              <div className={`difficulty-button difficulty-up ${upVisibility}`}  onClick={onUpDifficulty}></div>\n              <div className={`difficulty-button difficulty-down ${downVisibility}`}  onClick={onDownDifficulty}></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n}\n\nexport default Navigation","import React from \"react\";\n\nconst Field=({fields})=>{\n  return (\n    <div className=\"field\">\n       {\n        fields.map((row)=>{\n          return row.map((column)=>{\n            return <div className={`dots ${column}`}></div>\n          })\n        })\n      }\n    </div>\n  );\n};\n\nexport default Field;","import React from \"react\";\n\nconst Button=({status,onStart,onRestart,onStop})=>{\n  return (\n    <div className=\"button\">\n     {status ==='gameover' && <button className=\"btn btn-gameover\" onClick={onRestart}>gameover</button>}\n     {status ==='init' && <button className=\"btn btn-init\" onClick={onStart}>start</button>} \n     {status ==='suspended' && <button className=\"btn btn-suspended\" onClick={onStart}>start</button>} \n     {status ==='playing' && <button className=\"btn btn-playing\" onClick={onStop}>stop</button>} \n     </div>\n  );\n};\n\nexport default Button;","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowUp,faArrowDown,faArrowLeft,faArrowRight } from \"@fortawesome/free-solid-svg-icons\";\n\nconst ManipulationPanel=({onChange})=>{\n  const onUp=()=>onChange('up')\n  const onRight=()=>onChange('right')\n  const onLeft=()=>onChange('left')\n  const onDown=()=>onChange('down')\n  return (\n    <div className=\"manipulation-panel\">\n       <button className=\"manipulation-btn btn btn-left\" onClick={onLeft}>\n         <FontAwesomeIcon icon={faArrowLeft}/>\n       </button>\n       <div>\n       <button className=\"manipulation-btn btn btn-up\" onClick={onUp}>\n       <FontAwesomeIcon icon={faArrowUp}/>\n       </button>\n       <button className=\"manipulation-btn btn btn-down\" onClick={onDown}>\n       <FontAwesomeIcon icon={faArrowDown}/>\n       </button>\n       </div>\n      <button  className=\"manipulation-btn btn btn-right\" onClick={onRight}>\n      <FontAwesomeIcon icon={faArrowRight}/>\n      </button>\n    </div>\n  )\n}\n\nexport default ManipulationPanel\n;","export const getFoodPosition = (fieldSize,excludes) => {\n  while(true){\n    const x = Math.floor(Math.random() * ((fieldSize - 1) - 1)) + 1;\n    const y = Math.floor(Math.random() * ((fieldSize - 1) - 1)) + 1;\n    const conflict=excludes.some(item=>item.x===x && item.y===y)\n\n    if(!conflict){\n      return { x, y };\n    }\n  }\n};\nexport const initFields = (fieldSize, snake) => {\nconst fields=[]\n  for(let i=0;i<fieldSize;i++)\n  {\n    const cols=new Array(fieldSize).fill('')\n    fields.push(cols)\n  }\n  fields[snake.y][snake.x] = 'snake'\n  const food = getFoodPosition(fieldSize,[snake])\n   fields[food.y][food.x] = 'food'\n  return fields;\n}","import React,{useEffect,useState,useCallback} from 'react';\nimport Navigation from './components/Navigation';\nimport Field from './components/Field';\nimport Button from './components/Button';\nimport ManipulationPanel from './components/ManipulatuionPanel';\nimport { initFields , getFoodPosition} from './utils';\n\n\nconst initialPosition={x:17,y:17}\nconst initialValue=initFields(35,initialPosition);\nconst defaultInterval=100\nconst defaultDifficulty=3\n\nconst Difficulty=[1000,500,100,50,10]\n\nconst GameStatus=Object.freeze({\n  init:'init',\n  playing:'playing',\n  suspended:'suspended',\n  gameover:'gameover'\n})\nconst Direction=Object.freeze({\n  up:'up',\n  right:'right',\n  left:'left',\n  down:'down'\n})\nconst DirectionKeyCodeMap = Object.freeze({\n  37: Direction.left,\n  38: Direction.up,\n  39: Direction.right,\n  40: Direction.down,\n});\n\nconst Delta=Object.freeze({\n  up:{x:0,y:-1},\n  right:{x:1,y:0},\n  left:{x:-1,y:0},\n  down:{x:0,y:1}\n})\n\nconst OppsiteDirection=Object.freeze({\n  up:'down',\n  right:'left',\n  left:'right',\n  down:'up'\n})\n\nlet timer=undefined\nconst unsbscribe=()=>{\n  if(!timer){\n    return\n  }\n  clearInterval(timer)\n\n}\n\nconst isCollision=(fieldSize,position)=>{\n  if(position.y < 0 || position.x < 0){\n    return true\n  }\n  if(position.y>fieldSize-1 || position.x>fieldSize-1){\n    return true\n  }\n  return false\n}\nconst isEatingMyself=(fields,position)=>{\n  return fields[position.y][position.x]==='snake'\n}\nfunction App() {\n  const [fields,setFields]=useState(initialValue)\n  const [body,setBody]=useState([])\n  const [status,setStatus]=useState(GameStatus.init)\n  const [tick,setTick]=useState(0)\n  const [direction,setDirection]=useState(Direction.up)\n  const [difficulty,setDifficulty]=useState(defaultDifficulty)\n  const onChangeaDirection=useCallback((newDirection)=>{\n       if(status!==GameStatus.playing){\n         return direction\n       }\n       if(OppsiteDirection[direction]===newDirection){\n         return\n       }\n       setDirection(newDirection)\n      },[direction,status])\n  const onChangeDifficulty=useCallback((difficulty)=>{\n      if(status!==GameStatus.init){\n        return\n      }\n      if(difficulty<1 || difficulty>Difficulty.length){\n        return\n      }\n      setDifficulty(difficulty)\n  },[status,difficulty])\n  useEffect(()=>{\n    const handleKeyDown=(e)=>{\n      const newDirection=DirectionKeyCodeMap[e.keyCode];\n      if(!newDirection){\n        return;\n      }\n      onChangeaDirection(newDirection)\n    }\n    document.addEventListener('keydown',handleKeyDown);\n    return()=>document.removeEventListener('keydown',handleKeyDown)\n  },[onChangeaDirection])\n  useEffect(()=>{\n    setBody([initialPosition])\n    const interval=Difficulty[difficulty-1]\n    timer=setInterval(() => {\n      setTick(tick=>tick+1)\n    }, interval);\n    return unsbscribe\n  },[difficulty])\n  useEffect(()=>{\n    if(body.length === 0 || status !== GameStatus.playing){\n      return\n    }\n    const canContinue=handleMoving()\n    if(!canContinue){\n      setStatus(GameStatus.gameover)\n    }\n  },[tick])\n  const handleMoving=()=>{\n    const { x, y } = body[0]\n    const delta=Delta[direction]\n    const newPosition={\n      x:x+delta.x,\n      y:y+delta.y\n    }\n    if(isCollision(fields.length,newPosition) || isEatingMyself(fields,newPosition)){\n      return false\n    }\n    const newBody = [...body]\n     if (fields[newPosition.y][newPosition.x] !== 'food') {\n       const removingTrack = newBody.pop()\n       fields[removingTrack.y][removingTrack.x] = ''\n     }else{\n       const food =getFoodPosition(fields.length,[...newBody,newPosition])\n       fields[food.y][food.x]='food'\n     }\n     fields[newPosition.y][newPosition.x] = 'snake'\n     newBody.unshift(newPosition)\n     setBody(newBody)\n    setFields(fields)\n    return true\n  }\n\n  const onStart =()=> setStatus(GameStatus.playing)\n  \n  const onStop =()=>  setStatus(GameStatus.suspended)\n  const onRestart=()=>{\n    timer=setInterval(() => {\n      setTick(tick=>tick+1)\n    }, defaultInterval);\n    setStatus(GameStatus.init)\n    setBody(initialPosition)\n    setDirection(Direction.up)\n    setFields(initFields(35,initialPosition))\n  }\n  return (\n    <div className=\"App\">\n      <header className=\"header\">\n        <div className=\"title-container\">\n          <h1 className=\"title\">Snake Game</h1>\n        </div>\n        <Navigation \n        length={body.length} \n        difficulty={difficulty}\n        onChangeDifficulty={onChangeDifficulty}\n        />\n      </header>\n      <main className=\"main\">\n        <Field fields={fields}/>\n      </main>\n      <div style={{padding:'16px'}}>\n        <button>進む</button>\n      </div>\n      <footer className=\"footer\">\n        <Button \n        status={status} \n        onStop={onStop}\n        onStart={onStart} \n        onRestart={onRestart} />\n        <ManipulationPanel onChange={onChangeaDirection}/>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}